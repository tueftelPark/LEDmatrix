// ======================================================
// Wir gestalten ein Bild
// ======================================================
// Benutzte Befehle:
// matrix.displayFrames(example + FRAME*8, ZEIT_MS, false, 1);
//  â†’ Zeigt ein einzelnes Frame (Bild) aus dem Array an.
//    FRAME = Nummer des Frames (0 = erstes, 1 = zweites, â€¦)
//    ZEIT_MS = Dauer der Anzeige eines Frames
//
// matrix.stopDisplay();
//  â†’ Stoppt die aktuelle Anzeige (bei manchen Versionen instabil)
//    Besser: Ein â€žleeresâ€œ Frame anzeigen.
//
// delay(ZEIT_MS);â€ƒâ€ƒâ†’ Pause zwischen zwei Aktionen
// for (int i = 0; i < ANZAHL; i++) { â€¦ }â€ƒâ†’ Wiederholt Befehle (z. B. fÃ¼r Animationen)
//
// ======================================================


#include "grove_two_rgb_led_matrix.h"
#include <avr/pgmspace.h> // FÃ¼r PROGMEM (groÃŸe Arrays im Flash speichern)

#ifdef ARDUINO_SAMD_VARIANT_COMPLIANCE
#define SERIAL SerialUSB
#else
#define SERIAL Serial
#endif

#define DISPLAY_COLOR 0x11 // Standardfarbe der Anzeige (frei anpassbar)

GroveTwoRGBLedMatrixClass matrix;
uint64_t clearFrame[8];

// ==================================================================
// BILD-DATEN -> hier kommt dein Bild als Zahlen und Buchstaben rein
// ==================================================================
// TODO: FÃ¼ge hier dein Bild als Code aus dem Online Editor ein
const uint64_t example[] PROGMEM = {

  0xffff1d000000ffff,
  0xff0000000000ffff,
  0xff80d38010d310ff,
  0xffd31010d3d310ff,
  0xffffd3d3d312ffff,
  0xffff29982c0101ff,
  0xff1898989807ff18,
  0xffff12ffff12ffff,
 
};

// ======================================================
// SETUP â€“ hier werden alle Vorbereitungen getroffen
// ======================================================
void setup() {
  Wire.begin();
  SERIAL.begin(115200);
  delay(1000);

  uint16_t VID = matrix.getDeviceVID();
  if (VID != 0x2886) {
    SERIAL.println(F("LED-Matrix nicht erkannt!"));
    while (1);
  }
  SERIAL.println(F("Matrix erfolgreich verbunden!"));
}

// ======================================================
// LOOP â€“ hier werden die Aktionen ausgefÃ¼hrt
// ======================================================
void loop() {
  // --- Display leeren ---
  for (int i = 0; i < 8; i++) clearFrame[i] = 0xffffffffffffffff;
  matrix.displayFrames(clearFrame, 100, false, 1);

  // --- Bild anzeigen ---
  uint64_t buffer[8];
  //TODO: Passe hier die Anzahl Frames an gemÃ¤ss deiner Animation
  const int frameCount = 22; 

  for (int frame = 0; frame < frameCount; frame++) {
    for (int row = 0; row < 8; row++) {
      buffer[row] = read_qword_from_progmem(&example[frame * 8 + row]);
    }
    matrix.displayFrames(buffer, 600, false, 1); // 600 = Zeit pro Frame (langsamer/schneller)
    delay(600);
  }

  // --- Zweiter Text ---
  matrix.displayString("GOAL 1:0!!", 2500, true, 0x03);
  delay(2500);

  // ======================================================
  // âœï¸ HIER EIGENE BEFEHLE EINFÃœGEN (KOPIEREN AUS OBEN)
  // ======================================================
  //
  // Beispiele:
  //
  // matrix.displayString("LEVEL UP!", 3000, true, 0x05);
  // delay(1000);
  //
  // matrix.displayFrames(example + 1*8, 800, false, 1);
  // delay(500);
  //
  // matrix.displayString("GAME OVER", 4000, true, 0x04);
  // delay(2000);
  //
  // â†’ Text Ã¤ndern: erster Parameter ("TEXT")
  // â†’ Anzeigedauer Ã¤ndern: zweiter Parameter (z. B. 3000 = 3 Sekunden)
  // â†’ Farbe Ã¤ndern: letzter Parameter (z. B. 0x05 = Magenta)
  //
  // ======================================================
  // ðŸ’¡ BEISPIELE ZUM KOPIEREN (unten in den Loop einfÃ¼gen)
  //
  // matrix.displayString("Hallo!", 120, true, 0x03); // gelber Text, mittlere Geschwindigkeit
  // delay(3000); // warten, bis Text ganz sichtbar war
  //
  // matrix.displayString("GO!", 80, true, 0x04); // blauer, schneller Text
  // delay(2000);
  //
  // matrix.displayFrames(example + 0*8, 500, false, 1); // Frame 0 0.5 s anzeigen
  // delay(500);
  // ======================================================

}